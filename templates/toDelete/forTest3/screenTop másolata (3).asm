pic96px_KernelStart
	LDA	frameColor
	STA	WSYNC		; (76)
	STA	HMCLR		; 3
	STA	COLUBK		; 3 (6)
	STA	COLUP0		; 3 (9)
	STA	COLUP1		; 3 (12)
	STA	COLUPF		; 3 (15)

	LDA	#0		; 2 (17)
	STA	PF0		; 3 (20)
	STA	PF1		; 3 (23)
	STA	PF2		; 3 (26)
	STA	GRP0		; 3 (29)
	STA	GRP1		; 3 (32)
	STA	VDELP0		; 3 (35)
	STA	VDELP1		; 3 (38)

	LDA	#$06		; 2 (40)
	STA	NUSIZ0		; 3 (43)
	STA	NUSIZ1		; 3 (46) 

	LDA	#%00000001	; mirrored pf with regular colors 2 (48)
 	STA	CTRLPF		; 3 (51)

	LDA	#picHeight	; height of the picture 3 (53)
	SEC			; 2 (55)
	SBC	picIndex	; index of scrolling 3 (58)
	STA	temp01		; starting point 3 (61)
	TAY			; 2 (63)
	SEC			; 2 (65)
	SBC 	picDisplayHeight ; 3 (68)
	STA 	temp02		; displayed height (stops if Y gets here) 3 (71)
	STA	WSYNC		; (76)	- One line wasted

	_sleep	22
	NOP

	STA	RESP0		; 3 (32)
	sleep	3		;   (34)	
	STA	RESP1		; 3 (37) Set the X pozition of sprites.

	LDA	counter		; 3 (6)
	AND	#%00000001	; 2 (8)
	CMP	#%00000001	; 2 (10)
	BNE	pic96px_OddFrame  ; 2 (12)
	JMP	pic96px_EvenFrame ; 3 (15)	

	align	256


pic96px_OddFrameX

	sleep	57
	TSX					; 2
	STX	item				; 3

	LDA	#$00				; 2
	STA 	HMP0				; 3 
	LDA	#$20				; 2
	STA 	HMP1				; 3 
	STA 	WSYNC				; 76

pic96px_OddFrame_Line1
	STA	HMOVE				; 3 

	LDA	pic96px_Color,y			; 4 (7)
	STA	COLUP0				; 3 (10)
	STA	COLUP1				; 3 (13)
	
	LDA	pic96px_00,y			; 4 (17)
	STA	GRP0				; 3 (20)
	LDA	pic96px_02,y			; 4 (24)
	STA	GRP1				; 3 (27)

	sleep	7
	LAX	pic96px_10,y			; 4

	LDA	pic96px_04,y			; 4 
	STA	GRP0				; 3 

	LDA	pic96px_06,y			; 4 
	STA	GRP1				; 3 

	LDA	pic96px_08,y			; 4 
	STA	GRP0				; 3 

	STX	GRP1				; 3

*******	sleep	62
						; (65)
	LDA	#$80				; 2 (67)
	STA 	HMP0				; 3 (70)
	STA 	HMP1				; 3 (73)

pic96px_OddFrame_Line2
	STA 	WSYNC
	STA	HMOVE				; 3 

	LDA	pic96px_01,y			; 4 (7)
	STA	GRP0				; 3 (10)
	LDA	pic96px_03,y			; 4 (14)
	STA	GRP1				; 3 (17)

	LAX	pic96px_11,y			; 4 
	TXS					; 2

	LAX	pic96px_09,y			; 4 

	LDA	#$00				; 2 
	STA 	HMP0				; 3 
	STA 	HMP1				; 3 

	LDA	pic96px_05,y			; 4 
	STA	GRP0				; 3 

	LDA	pic96px_07,y			; 4 
	STA	GRP1				; 3 

	STX	GRP0				; 3
	
	TSX					; 2
	STX	GRP1				; 3

*******	sleep	48
						; (56, but 52?!)
	sleep	2
	DEY					; 2 (66)
	CPY	temp02				; 3 (69)
	BEQ	pic96px_Reset			; 2 (71)	
	JMP	pic96px_OddFrame_Line1		; 3 (74)

pic96px_OddFrame
pic96px_EvenFrame
	sleep	62

	LDA	#$80				
	STA 	HMP0				
	LDA	#$A0				
	STA 	HMP1	

pic96px_EvenFrame_Line1			
	STA 	WSYNC				; 76
	STA	HMOVE				; 3

	LDA	pic96px_Color,y			; 4 (7)
	STA	COLUP0				; 3 (10)
	STA	COLUP1				; 3 (13)
	
	LDA	pic96px_01,y			; 4 (17)
	STA	GRP0				; 3 (20)
	LDA	pic96px_03,y			; 4 (24)
	STA	GRP1				; 3 (27)

	sleep	36

******	sleep	60
						; (66)
	LDA	#$00				; 2 (68)
	STA 	HMP0				; 3 (71)
	STA 	HMP1				; 3 (74)
pic96px_EvenFrame_Line2
	STA	HMOVE				; 3 
	
	sleep	55				; (58)

	LDA	#$80				; 2 (60)
	STA 	HMP0				; 3 (63)
	STA 	HMP1				; 3 (66)
	DEY					; 2 (68)
	CPY	temp02				; 3 (71)
	BNE	pic96px_EvenFrame_Line1		; 2 (73)

pic96px_Reset
	LDA	frameColor
	STA	WSYNC		; (76)
	STA	COLUBK	
	STA	COLUP0
	STA	COLUP1	
	STA	COLUPF
	LDA	#0		
	STA	PF0
	STA	PF1		
	STA	PF2		
	STA	GRP0		
	STA	GRP1		
	STA	VDELP0		
	STA	VDELP1	
		
	LDX	item
	TXS

	JMP	TestEnded

pic96px_Data_Section

	align	256

pic96px_00
	BYTE %00000000
	BYTE %00000000
	BYTE %00000001
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000011
	BYTE %00000111
	BYTE %00011111
	BYTE %01111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000	; 43

pic96px_01
	BYTE %00000000
	BYTE %00000000
	BYTE %11000000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11110000
	BYTE %11110000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111000
	BYTE %11110000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11100000
	BYTE %11110000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11100000
	BYTE %00000000
	BYTE %00000000	; 86


pic96px_02
	BYTE %00000000
	BYTE %00000000
	BYTE %00000111
	BYTE %00001111
	BYTE %00011111
	BYTE %00111111
	BYTE %01111111
	BYTE %01111110
	BYTE %01111100
	BYTE %01111100
	BYTE %01111100
	BYTE %01111110
	BYTE %01111111
	BYTE %00111111
	BYTE %00111111
	BYTE %00011111
	BYTE %00001111
	BYTE %00000011
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000	; 129

pic96px_03
	BYTE %00000000
	BYTE %00000000
	BYTE %11111100
	BYTE %11111110
	BYTE %11111111
	BYTE %11111111
	BYTE %00011111
	BYTE %00001111
	BYTE %00000111
	BYTE %00000111
	BYTE %00000111
	BYTE %00001111
	BYTE %00011111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111110
	BYTE %11111000
	BYTE %00000000
	BYTE %11110000
	BYTE %11111000
	BYTE %11111000
	BYTE %11110000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000	; 172

pic96px_04
	BYTE %00000000
	BYTE %00000000
	BYTE %00000111
	BYTE %00000111
	BYTE %00000111
	BYTE %10000111
	BYTE %11000111
	BYTE %11000111
	BYTE %11000111
	BYTE %11000111
	BYTE %11000111
	BYTE %11000111
	BYTE %11000111
	BYTE %10000111
	BYTE %10000111
	BYTE %00000011
	BYTE %00000001
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000	; 215

	align	255

pic96px_05
	BYTE %00000000
	BYTE %00000000
	BYTE %11000000
	BYTE %11000000
	BYTE %11000000
	BYTE %11000000
	BYTE %11000001
	BYTE %11000001
	BYTE %11000001
	BYTE %11000001
	BYTE %11000001
	BYTE %11000001
	BYTE %11000001
	BYTE %11100001
	BYTE %11111001
	BYTE %11111001
	BYTE %11111001
	BYTE %11111001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000001
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_06
	BYTE %00000000
	BYTE %00000000
	BYTE %00011110
	BYTE %01111110
	BYTE %11111110
	BYTE %11111110
	BYTE %11111100
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11111110
	BYTE %11111110
	BYTE %11111110
	BYTE %11111110
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %11110000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_07
	BYTE %00000000
	BYTE %00000000
	BYTE %00000111
	BYTE %00001111
	BYTE %00011111
	BYTE %00111111
	BYTE %01111110
	BYTE %01111100
	BYTE %01111000
	BYTE %01111000
	BYTE %01111000
	BYTE %01111100
	BYTE %01111110
	BYTE %01111111
	BYTE %00111111
	BYTE %00011111
	BYTE %00001111
	BYTE %00000111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_08
	BYTE %00000000
	BYTE %00000000
	BYTE %11111011
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00011111
	BYTE %00001111
	BYTE %00000111
	BYTE %00000111
	BYTE %00000111
	BYTE %00001111
	BYTE %00011111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111110
	BYTE %11111100
	BYTE %11111000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_09
	BYTE %00000000
	BYTE %00000000
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11100111
	BYTE %11000111
	BYTE %11000111
	BYTE %10000111
	BYTE %00000111
	BYTE %00000011
	BYTE %00000001
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

	align	255

pic96px_10
	BYTE %00000000
	BYTE %00000000
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000011
	BYTE %11000000
	BYTE %11000000
	BYTE %11000000
	BYTE %11100000
	BYTE %11111000
	BYTE %11111000
	BYTE %11111000
	BYTE %11111000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_11
	BYTE %00000000
	BYTE %00000000
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %11111111
	BYTE %00111111
	BYTE %00011111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00000000
	BYTE %00000000
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00001111
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000
	BYTE %10000000
	BYTE %11100000
	BYTE %11110000
	BYTE %11100000
	BYTE %11000000
	BYTE %00000000
	BYTE %00000000
	BYTE %00000000

pic96px_Color
	BYTE	#$00
	BYTE	#$02
	BYTE	#$04
	BYTE	#$06
	BYTE	#$08
	BYTE	#$0a
	BYTE	#$0c
	BYTE	#$0e
	BYTE	#$10
	BYTE	#$12
	BYTE	#$14
	BYTE	#$16
	BYTE	#$18
	BYTE	#$1a
	BYTE	#$1c
	BYTE	#$1e
	BYTE	#$20
	BYTE	#$22
	BYTE	#$24
	BYTE	#$26
	BYTE	#$28
	BYTE	#$2a
	BYTE	#$28
	BYTE	#$26
	BYTE	#$24
	BYTE	#$22
	BYTE	#$20
	BYTE	#$1c
	BYTE	#$1c
	BYTE	#$1a
	BYTE	#$18
	BYTE	#$16
	BYTE	#$14
	BYTE	#$12
	BYTE	#$10
	BYTE	#$0e
	BYTE	#$0c
	BYTE	#$0a
	BYTE	#$08
	BYTE	#$06
	BYTE	#$04
	BYTE	#$02
	BYTE	#$00	; 129

TestEnded