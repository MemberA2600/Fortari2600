48pxText
	LDA	frameColor
	STA	WSYNC		; (76)
	STA	HMCLR		; 3
	STA	COLUBK		; 3 (6)
	LDA	#0		; 2 (8)
	STA	PF0		; 3 (11)
	STA	PF1		; 3 (14)
	STA	PF2		; 3 (17)
	STA	GRP0		; 3 (20)
	STA	GRP1		; 3 (23)
	STA	VDELP0		; 3 (26)
	STA	VDELP1		; 3 (29)
	STA	CTRLPF		; 3 (32)

	sleep	4		

	STA	RESP0		; 3 	
	STA	RESP1		; 3 Set the X pozition of sprites.

	LDA	#$00		; 2 
	STA	HMP0		; 3 

	LDA	#$10		; 2 
	STA	RESBL
	STA	HMP1		; 3 

	LDA	#$E0
	STA	HMBL

	LDA	#$03		; 2 			
	STA	NUSIZ0		; 3 
	STA	NUSIZ1		; 3 
	
48pxTextCursorBlinking
	LDX	#0
	BIT	counter
	BVS	48pxTextOtherWayAround	;  turn every 64 frame
	LDY	#38
	LDA	#39
	JMP	48pxTextCheckForBlinking
48pxTextOtherWayAround
	LDY	#39
	LDA	#38
48pxTextCheckForBlinking
	CPX	#12
	BCC	48pxTextPrepareForDarkness
	CMP	Letter01,x
	BNE	48pxTextNoChangeForBlinking
	STY	Letter01,x	
48pxTextNoChangeForBlinking
	INX
	JMP 	48pxTextCheckForBlinking

48pxTextPrepareForDarkness
	LDA	BackColor	
	STA	WSYNC
	STA	HMOVE		; 3	
	STA	COLUBK		; 3 (6)

	LDY	#4		
	STY	temp02		
	TSX			
	STX	item	

48pxTextFillerLine1
	LDA	counter	
	AND	#%00000010
	CMP	#%00000010
	BEQ	48pxTextCalculateDataStart
	STA	WSYNC
	STA	WSYNC

48pxTextCalculateDataStart
	STA	WSYNC
	LDX	#0
48pxTextResetGRP
	STX	GRP0
	STX	GRP1
	STX	ENABL

48pxTextCalculateData
	TYA
	EOR	counter		  	; Seems like the best way to decide
	AND	#%00000001		; which lines to draw.
	CMP	#%00000001
	BEQ	48pxTextEvenLine

48pxTextOddLine
	LDA	Letter01
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp03
	
	LDA	Letter03
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp04

	LDA	Letter05
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp05

	LDA	Letter07
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp06

	LDA	Letter09
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp07

	LDA	Letter11
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%11110000
	STA	temp08

	JMP	48pxTextThisLineIsCalculated	
48pxTextEvenLine
	LDA	Letter02
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp03
	
	LDA	Letter04
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp04

	LDA	Letter06
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp05

	LDA	Letter08
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp06

	LDA	Letter10
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp07

	LDA	Letter12
	TAX
	LDA	BankXX5Table,x		; Got the starting address
	CLC
	ADC	temp02
	TAX
	LDA	BankXXFont,x		; Got the font data
	AND	#%00001111
	STA	temp08

48pxTextThisLineIsCalculated	
	LDA	TextColor
	ADC	BankXXColors,y
	STA	COLUP0
	STA	COLUP1
	STA	COLUPF

	STA	WSYNC

	LDA	temp03		; 3 (6)
	STA	GRP0		; 3 (9)
	LDA	temp04		; 3 (12)
	STA	GRP1		; 3 (15)

	LDX	temp08
	TXS
	TXA	
	LDY	temp06
	LDX	temp07

	ROL
	ROL
	ROL
	STA	ENABL

	sleep	3

	LDA	temp05		; 3 
	STA	GRP0		; 3 
	
	STY	GRP1
	STX	GRP0
	TSX
	STX	GRP1


	DEC	temp02		; 5
	LDY	temp02		; 3
	BMI	48pxTextFillerLine2	; 2 
	JMP	48pxTextCalculateDataStart   ; 3

48pxTextFillerLine2
	LDA	#0
	STA	GRP0
	STA	GRP1
	STA 	ENABL		

	LDA	counter	
	AND	#%00000010
	CMP	#%00000010
	BNE	48pxTextReset
	STA	WSYNC
	STA	WSYNC

48pxTextReset
	LDA	frameColor
	STA	WSYNC		; (76)
	STA	COLUBK		
	LDA	#0		
	STA	PF0
	STA	PF1		
	STA	PF2		
	STA	GRP0		
	STA	GRP1		
	STA	VDELP0		
	STA	VDELP1	

	LDX	item		
	TXS	

	JMP	EndTest

	align	256

BankXXFont
BankXX_0
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%11101110
	BYTE	#%01000100
BankXX_1
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
BankXX_2
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%10101010	
	BYTE	#%01000100
BankXX_3
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%01100110
	BYTE	#%10101010
	BYTE	#%01000100
BankXX_4
	BYTE	#%00100010
	BYTE	#%11101110
	BYTE	#%10101010
	BYTE	#%01000100	
	BYTE	#%00100010
BankXX_5
	BYTE	#%11001100
	BYTE	#%00100010
	BYTE	#%11001100
	BYTE	#%10001000	
	BYTE	#%11101110
BankXX_6
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%01100110
BankXX_7
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%00100010
	BYTE	#%11101110
BankXX_8	
	BYTE	#%01000100
	BYTE	#%10101010	
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%01000100
BankXX_9
	BYTE	#%11001100
	BYTE	#%00100010
	BYTE	#%01100110
	BYTE	#%10101010
	BYTE	#%01000100	; 10
BankXX_A
	BYTE	#%10101010
	BYTE	#%11101110
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%01000100
BankXX_B
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%11001100
BankXX_C
	BYTE	#%01100110
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%01100110
BankXX_D
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%11001100
BankXX_E
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%11001100
	BYTE	#%10001000
	BYTE	#%11101110
BankXX_F
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%11001100
	BYTE	#%10001000
	BYTE	#%11101110
BankXX_G
	BYTE	#%01100110
	BYTE	#%10101010
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%01100110
BankXX_H
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%11101110
	BYTE	#%10101010
	BYTE	#%10101010
BankXX_I
	BYTE	#%11101110
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%11101110
BankXX_J
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%00100010
	BYTE	#%00100010
	BYTE	#%01100110	; 20
BankXX_K
	BYTE	#%10101010
	BYTE	#%11001100
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%10001000
BankXX_L
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%10001000
BankXX_M
	BYTE	#%10011001
	BYTE	#%10011001
	BYTE	#%11011101
	BYTE	#%11111111
	BYTE	#%11111111
BankXX_N
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%11101010
	BYTE	#%11101010
	BYTE	#%10101010
BankXX_O
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%01000100
BankXX_P
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%11001100
BankXX_Q
	BYTE	#%01110111
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%01000100
BankXX_R
	BYTE	#%10101010
	BYTE	#%11001100
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%11001100
BankXX_S
	BYTE	#%01100110
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%11001100
BankXX_T
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%11101110	; 30
BankXX_U
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
BankXX_V
	BYTE	#%01000100
	BYTE	#%11001100
	BYTE	#%10101010
	BYTE	#%10101010
	BYTE	#%10101010
BankXX_W
	BYTE	#%01100110
	BYTE	#%11111111
	BYTE	#%10111011
	BYTE	#%10011001
	BYTE	#%10011001
BankXX_X
	BYTE	#%10101010
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%10101010
BankXX_Y
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%10101010
BankXX_Z
	BYTE	#%11101110
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%11101110
BankXX_Space
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
BankXX_Cursor1
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
BankXX_Cursor2
	BYTE	#%11111111
	BYTE	#%11111111
	BYTE	#%11111111
	BYTE	#%11111111
	BYTE	#%11111111
BankXX_Plus
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%11101110
	BYTE	#%01000100
	BYTE	#%01000100	; 40
BankXX_Minus
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%11101110
	BYTE	#%00000000
	BYTE	#%00000000	
BankXX_Eq
	BYTE	#%00000000
	BYTE	#%11101110
	BYTE	#%00000000
	BYTE	#%11101110
	BYTE	#%00000000
BankXX_Multi
	BYTE	#%00000000
	BYTE	#%10101010
	BYTE	#%01000100
	BYTE	#%10101010
	BYTE	#%00000000
BankXX_Div
	BYTE	#%10001000
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%00100010
BankXX_Percent
	BYTE	#%10101010
	BYTE	#%10001000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%10101010
BankXX_Underline
	BYTE	#%11101110
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
BankXX_Dot
	BYTE	#%01000100
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
	BYTE	#%00000000
BankXX_Mark1
	BYTE	#%01000100
	BYTE	#%00000000
	BYTE	#%01000100
	BYTE	#%01000100
	BYTE	#%01000100
BankXX_Mark2
	BYTE	#%01000100
	BYTE	#%00000000
	BYTE	#%01000100
	BYTE	#%00100010
	BYTE	#%11001100
BankXX_Dots
	BYTE	#%00000000
	BYTE	#%01000100
	BYTE	#%00000000
	BYTE	#%01000100
	BYTE	#%00000000	; 50

BankXXColors
	BYTE	#$00
	BYTE	#$02
	BYTE	#$04
	BYTE	#$02
	BYTE	#$00

BankXX5Table
	BYTE	#0
	BYTE	#5
	BYTE	#10
	BYTE	#15
	BYTE	#20
	BYTE	#25
	BYTE	#30
	BYTE	#35
	BYTE	#40
	BYTE	#45
	BYTE	#50
	BYTE	#55
	BYTE	#60
	BYTE	#65
	BYTE	#70
	BYTE	#75
	BYTE	#80
	BYTE	#85
	BYTE	#90
	BYTE	#95
	BYTE	#100
	BYTE	#105
	BYTE	#110
	BYTE	#115
	BYTE	#120
	BYTE	#125
	BYTE	#130
	BYTE	#135
	BYTE	#140
	BYTE	#145
	BYTE	#150
	BYTE	#155
	BYTE	#160
	BYTE	#165
	BYTE	#170
	BYTE	#175
	BYTE	#180
	BYTE	#185
	BYTE	#190
	BYTE	#195
	BYTE	#200
	BYTE	#205
	BYTE	#210
	BYTE	#215
	BYTE	#220
	BYTE	#225
	BYTE	#230
	BYTE	#235
	BYTE	#240
	BYTE	#245
	BYTE	#250
EndTest



